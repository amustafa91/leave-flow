import{a as P}from"./chunk-3CDIZWEL.js";import"./chunk-A5WJPGEG.js";import{$ as x,$a as C,Ca as q,Db as T,Fb as D,Ga as w,Ka as f,Ra as A,Ua as _,Va as I,Wa as k,Xa as t,Ya as i,Za as g,_a as R,aa as u,ab as l,ba as y,ca as h,eb as a,fb as b,gb as p,hb as S,mb as s,na as E,nb as d,ya as r}from"./chunk-DENDG36W.js";var L=(o,n)=>n.id;function N(o,n){if(o&1&&(t(0,"p",16),a(1),i()),o&2){let e=l().$implicit;r(),p(' "',e.reason,'" ')}}function F(o,n){if(o&1){let e=R();t(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8),a(5),i(),t(6,"div")(7,"p",9),a(8),i(),t(9,"p",10),a(10),s(11,"date"),i()()(),t(12,"div",11)(13,"div",12),g(14,"div",13),t(15,"span"),a(16),i()(),t(17,"span",14),a(18,"|"),i(),t(19,"span"),a(20),s(21,"date"),s(22,"date"),i(),t(23,"span",14),a(24,"|"),i(),t(25,"span",15),a(26),i()(),f(27,N,2,1,"p",16),i(),t(28,"div",17)(29,"button",18),C("click",function(){let c=x(e).$implicit,v=l(2);return u(v.reject(c.id))}),a(30," Reject "),i(),t(31,"button",19),C("click",function(){let c=x(e).$implicit,v=l(2);return u(v.approve(c.id))}),a(32," Approve "),i()()()()}if(o&2){let e=n.$implicit;r(5),S(" ",(e.employeeName.split(" ")[0]||"")[0]||"","",(e.employeeName.split(" ")[1]||"")[0]||""," "),r(3),b(e.employeeName),r(2),p(" Requested on ",d(11,11,e.createdAt)," "),r(4),A("background-color",e.leaveTypeColor),r(2),b(e.leaveTypeName),r(4),S("",d(21,13,e.startDate)," - ",d(22,15,e.endDate),""),r(6),p("",e.totalDays," days"),r(),_(e.reason?27:-1)}}function V(o,n){if(o&1&&(t(0,"div",2),I(1,F,33,17,"div",4,L),i()),o&2){let e=l();r(),k(e.pendingRequests())}}function M(o,n){o&1&&(t(0,"div",3),y(),t(1,"svg",20),g(2,"path",21),i(),h(),t(3,"p",14),a(4,"No pending requests"),i(),t(5,"p",22),a(6,"All caught up! \u{1F389}"),i()())}var j=class o{constructor(n){this.leaveService=n}pendingRequests=E([]);ngOnInit(){this.loadPending()}loadPending(){this.leaveService.getPendingRequests().subscribe({next:n=>this.pendingRequests.set(n)})}approve(n){this.leaveService.approveRequest(n,{approve:!0}).subscribe({next:()=>this.loadPending()})}reject(n){let e=prompt("Reason for rejection (optional):");this.leaveService.approveRequest(n,{approve:!1,comments:e||void 0}).subscribe({next:()=>this.loadPending()})}static \u0275fac=function(e){return new(e||o)(q(P))};static \u0275cmp=w({type:o,selectors:[["app-approvals"]],decls:5,vars:1,consts:[[1,"animate-fadeIn"],[1,"text-2xl","font-bold","text-[var(--text-primary)]","mb-6"],[1,"grid","gap-4"],[1,"card","text-center","py-12"],[1,"card","hover:shadow-md","transition-shadow"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-2"],[1,"w-10","h-10","rounded-full","bg-gradient-to-br","from-emerald-400","to-cyan-400","flex","items-center","justify-center","text-white","font-medium","text-sm"],[1,"font-semibold","text-[var(--text-primary)]"],[1,"text-sm","text-[var(--text-secondary)]"],[1,"flex","items-center","gap-4","mt-4","text-sm"],[1,"flex","items-center","gap-2"],[1,"w-2","h-2","rounded-full"],[1,"text-[var(--text-secondary)]"],[1,"font-medium"],[1,"mt-3","text-sm","text-[var(--text-secondary)]","italic"],[1,"flex","gap-2","ml-4"],[1,"btn","btn-secondary","text-red-600","border-red-200","hover:bg-red-50",3,"click"],[1,"btn","btn-primary",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","mb-4","text-gray-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-[var(--text-secondary)]","mt-1"]],template:function(e,m){e&1&&(t(0,"div",0)(1,"h1",1),a(2,"Pending Approvals"),i(),f(3,V,3,0,"div",2)(4,M,7,0,"div",3),i()),e&2&&(r(3),_(m.pendingRequests().length>0?3:4))},dependencies:[D,T],encapsulation:2})};export{j as ApprovalsComponent};
