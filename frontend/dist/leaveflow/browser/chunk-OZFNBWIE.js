import{a as N,b as F,d as P,g as A,i as B,q as G,s as O}from"./chunk-6V3UBU2M.js";import{a as b}from"./chunk-A5WJPGEG.js";import{$ as c,$a as S,Ca as v,Fb as j,Ga as T,Ka as w,Kb as _,P as E,Qa as k,Sa as I,U as V,Ua as M,Va as L,Wa as D,Xa as o,Ya as i,Za as H,_a as f,aa as g,ab as d,eb as u,fb as U,gb as x,ib as p,jb as m,kb as y,na as C,ya as a}from"./chunk-DENDG36W.js";var h=class r{constructor(n){this.http=n}apiUrl=`${b.apiUrl}/settings`;getSettings(){return this.http.get(this.apiUrl)}updateSettings(n){return this.http.put(this.apiUrl,n)}static \u0275fac=function(t){return new(t||r)(V(_))};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};var Q=(r,n)=>n.key;function R(r,n){r&1&&(o(0,"div",2),H(1,"span",3),i())}function X(r,n){if(r&1){let t=f();o(0,"label",23)(1,"span",24),u(2),i(),o(3,"input",25),y("ngModelChange",function(e){let s=c(t).$implicit,W=d(3);return m(W.currentCountrySettings[s.key],e)||(W.currentCountrySettings[s.key]=e),g(e)}),i()()}if(r&2){let t=n.$implicit,l=d(3);I("border-blue-500",l.currentCountrySettings[t.key])("bg-blue-50",l.currentCountrySettings[t.key]),a(2),U(t.label),a(),p("ngModel",l.currentCountrySettings[t.key])}}function Y(r,n){if(r&1){let t=f();o(0,"div",17)(1,"h4",18),u(2),i(),o(3,"div",19),L(4,X,4,6,"label",20,Q),i(),o(6,"div",21)(7,"button",22),S("click",function(){c(t);let e=d(2);return g(e.saveCountry())}),u(8),i()()()}if(r&2){let t=d(2);a(2),x("Working Days for ",t.currentCountrySettings.countryCode,""),a(2),D(t.days),a(3),k("disabled",t.isSavingCountry()),a(),x(" ",t.isSavingCountry()?"Saving...":"Save "+t.currentCountrySettings.countryCode+" Workdays"," ")}}function Z(r,n){if(r&1){let t=f();o(0,"div",4)(1,"h3",5),u(2,"Global Configuration"),i(),o(3,"div",6)(4,"div")(5,"label",7),u(6,"Company Name"),i(),o(7,"input",8),y("ngModelChange",function(e){c(t);let s=d();return m(s.settings.companyName,e)||(s.settings.companyName=e),g(e)}),i()(),o(8,"div")(9,"label",7),u(10,"Default Country (ISO Code)"),i(),o(11,"input",9),y("ngModelChange",function(e){c(t);let s=d();return m(s.settings.defaultCountryCode,e)||(s.settings.defaultCountryCode=e),g(e)}),i()(),o(12,"div")(13,"label",7),u(14,"Standard Daily Hours"),i(),o(15,"input",10),y("ngModelChange",function(e){c(t);let s=d();return m(s.settings.defaultDailyWorkingHours,e)||(s.settings.defaultDailyWorkingHours=e),g(e)}),i()()(),o(16,"div",11)(17,"button",12),S("click",function(){c(t);let e=d();return g(e.saveGlobal())}),u(18),i()()(),o(19,"div",4)(20,"div",13)(21,"h3",5),u(22,"Country Workdays"),i(),o(23,"div",14)(24,"input",15),y("ngModelChange",function(e){c(t);let s=d();return m(s.selectedCountryCode,e)||(s.selectedCountryCode=e),g(e)}),i(),o(25,"button",16),S("click",function(){c(t);let e=d();return g(e.loadCountrySettings())}),u(26," Load "),i()()(),w(27,Y,9,3,"div",17),i()}if(r&2){let t=d();a(7),p("ngModel",t.settings.companyName),a(4),p("ngModel",t.settings.defaultCountryCode),a(4),p("ngModel",t.settings.defaultDailyWorkingHours),a(2),k("disabled",t.isSaving()),a(),x(" ",t.isSaving()?"Saving...":"Save Global Settings"," "),a(6),p("ngModel",t.selectedCountryCode),a(3),M(t.currentCountrySettings?27:-1)}}var q=class r{constructor(n,t){this.settingsService=n;this.http=t;this.loadSettings()}settings={};selectedCountryCode="AE";currentCountrySettings=null;isLoading=C(!0);isSaving=C(!1);isSavingCountry=C(!1);days=[{key:"monday",label:"Mon"},{key:"tuesday",label:"Tue"},{key:"wednesday",label:"Wed"},{key:"thursday",label:"Thu"},{key:"friday",label:"Fri"},{key:"saturday",label:"Sat"},{key:"sunday",label:"Sun"}];apiUrl=`${b.apiUrl}/settings`;loadSettings(){this.settingsService.getSettings().subscribe({next:n=>{this.settings=n,this.selectedCountryCode=n.defaultCountryCode||"AE",this.loadCountrySettings(),this.isLoading.set(!1)},error:()=>this.isLoading.set(!1)})}loadCountrySettings(){this.selectedCountryCode&&this.http.get(`${this.apiUrl}/country/${this.selectedCountryCode}`).subscribe({next:n=>this.currentCountrySettings=n,error:()=>{this.currentCountrySettings={countryCode:this.selectedCountryCode.toUpperCase(),monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!1,sunday:!1}}})}saveGlobal(){this.isSaving.set(!0),this.settingsService.updateSettings(this.settings).subscribe({next:n=>{this.settings=n,this.isSaving.set(!1),alert("Global settings updated!")},error:()=>{alert("Failed to update global settings"),this.isSaving.set(!1)}})}saveCountry(){this.currentCountrySettings&&(this.isSavingCountry.set(!0),this.http.post(`${this.apiUrl}/country`,this.currentCountrySettings).subscribe({next:n=>{this.currentCountrySettings=n,this.isSavingCountry.set(!1),alert(`Settings for ${n.countryCode} saved!`)},error:n=>{alert("Failed to save country settings"),this.isSavingCountry.set(!1)}}))}static \u0275fac=function(t){return new(t||r)(v(h),v(_))};static \u0275cmp=T({type:r,selectors:[["app-settings"]],decls:5,vars:1,consts:[[1,"animate-fadeIn","max-w-4xl","mx-auto","space-y-8"],[1,"text-2xl","font-bold","text-[var(--text-primary)]","mb-6"],[1,"flex","justify-center","p-8"],[1,"loading-spinner"],[1,"bg-white","rounded-xl","shadow-sm","border","border-[var(--border)]","p-6","space-y-6"],[1,"text-lg","font-semibold","text-[var(--text-primary)]"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-[var(--text-secondary)]","mb-1"],["type","text",1,"input-field","w-full",3,"ngModelChange","ngModel"],["type","text","placeholder","AE","maxlength","2",1,"input-field","w-full","uppercase",3,"ngModelChange","ngModel"],["type","number",1,"input-field","w-full",3,"ngModelChange","ngModel"],[1,"flex","justify-end","pt-4"],[1,"btn-primary","min-w-[120px]",3,"click","disabled"],[1,"flex","justify-between","items-center"],[1,"flex","gap-2"],["type","text","placeholder","Enter Country Code (e.g. US)","maxlength","2",1,"input-field","w-24","uppercase","text-center","font-bold",3,"ngModelChange","ngModel"],[1,"px-3","py-2","bg-gray-100","rounded","hover:bg-gray-200",3,"click"],[1,"animate-fadeIn","p-4","bg-gray-50","rounded-lg","border","border-gray-100"],[1,"font-medium","text-gray-700","mb-4"],[1,"grid","grid-cols-2","md:grid-cols-7","gap-2"],[1,"flex","flex-col","items-center","gap-2","p-3","rounded","bg-white","border","cursor-pointer","hover:border-blue-500","transition-colors",3,"border-blue-500","bg-blue-50"],[1,"flex","justify-end","mt-4"],[1,"btn-primary",3,"click","disabled"],[1,"flex","flex-col","items-center","gap-2","p-3","rounded","bg-white","border","cursor-pointer","hover:border-blue-500","transition-colors"],[1,"text-sm","font-medium"],["type","checkbox",1,"w-5","h-5","text-blue-600","rounded",3,"ngModelChange","ngModel"]],template:function(t,l){t&1&&(o(0,"div",0)(1,"h1",1),u(2,"Settings"),i(),w(3,R,2,0,"div",2)(4,Z,28,7),i()),t&2&&(a(3),M(l.isLoading()?3:4))},dependencies:[j,O,F,B,N,P,G,A],encapsulation:2})};export{q as SettingsComponent};
